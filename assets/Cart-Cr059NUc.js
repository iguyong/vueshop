import{p as f}from"./product-placeholder-CDHWcwM5.js";import{_ as N,f as F,r as h,p as v,c as r,a as t,t as n,j as c,F as I,k as q,q as x,s as D,o as l,b as B}from"./index-Bv4Am3CP.js";const Q="/vueshop/assets/empty-cart-DIoAtBG5.svg";function d(i){const e=typeof i=="number"?i:Number(i)||0;return new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY",minimumFractionDigits:2,maximumFractionDigits:2}).format(e).replace("CNY","¥")}const S={class:"cart-container"},V={class:"cart-nav"},$={key:0,class:"empty-cart"},A={key:1},w={class:"cart-list"},O=["src","alt"],Y={class:"item-info"},j={key:0,class:"sale-tag"},z={class:"price-section"},E={class:"unit-price"},G={class:"total-price"},L={class:"item-controls"},P={class:"quantity-control"},R=["onClick","disabled"],T=["onClick"],H=["onClick"],J={class:"cart-summary"},K={class:"summary-details"},M={class:"total-amount"},U=["disabled"],W={__name:"Cart",setup(i){const e=F(),y=D(),u=h(!1),b=h(null),g=v(()=>e.totalQuantity),_=v(()=>e.totalAmount),k=async()=>{try{u.value=!0;const o={items:e.cart,total:_.value},a=await e.createOrder(o);console.log("order created:",a),y.push(`/order-detail/${a.id}`)}catch(o){b.value="结算失败: "+o.message}finally{u.value=!1}},m=(o,a)=>{e.updateCartItemQuantity(o.id,a)},C=o=>{e.removeFromCart(o.id)};return(o,a)=>(l(),r("div",S,[t("nav",V,[t("h2",null,"我的购物车 ("+n(c(e).cart.length)+")",1)]),c(e).cart.length===0?(l(),r("div",$,a[0]||(a[0]=[t("img",{src:Q,alt:"空空如也的购物车插图"},null,-1),t("p",null,"您的购物车是空的",-1),t("button",null,"返回商城首页",-1)]))):(l(),r("div",A,[t("div",w,[(l(!0),r(I,null,q(c(e).cart,s=>(l(),r("div",{key:s.id,class:"cart-item"},[t("img",{src:s.image||c(f),alt:s.name,class:"product-image"},null,8,O),t("div",Y,[t("h3",null,n(s.name),1),s.onSale?(l(),r("div",j,"特价中")):B("",!0),t("div",z,[t("p",E,"单价：¥"+n(c(d)(s.price)),1),t("p",G,"小计：¥"+n(c(d)(s.price*s.quantity)),1)])]),t("div",L,[t("div",P,[t("button",{onClick:p=>m(s,-1),disabled:s.quantity<=1,"aria-label":"减少数量"},"-",8,R),t("span",null,n(s.quantity),1),t("button",{onClick:p=>m(s,1),"aria-label":"增加数量"},"+",8,T)]),t("button",{onClick:p=>C(s),class:"remove-btn"},"移除",8,H)])]))),128))]),t("div",J,[t("div",K,[t("p",null,"商品总数："+n(g.value)+"件",1),t("p",M,[a[1]||(a[1]=x("总金额：")),t("span",null,n(c(d)(_.value)),1)])]),t("button",{class:"checkout-btn",onClick:k,disabled:c(e).cart.length===0||u.value},n(u.value?"正在创建订单...":"去结算"),9,U)])]))]))}},tt=N(W,[["__scopeId","data-v-3c46b845"]]);export{tt as default};
